\section{Equational reasoning}

\begin{frame}
    \frametitle{Equality of circuits}

    When are two circuits equal?

    \pause

    When they have the same \alert{beahviour}.

    \pause

    \[
        \tikzfig{circuits/examples/demorgan-lhs} 
        \quad
        \tikzfig{circuits/examples/demorgan-rhs} 
    \]

    When they have the same \alert{stream function}.

    \pause

    But reasoning with streams is a \alert{pain}.
    
\end{frame}

\begin{frame}
    \frametitle{Equational reasoning}

    We want to reason \alert{equationally}.

\end{frame}

\begin{frame}
    \frametitle{Productivity}


    A circuit is \alert{productive} if it can be reduced to an \alert{instant value} and a \alert{delayed subcircuit}.

    \[
        \tikzfig{circuits/components/circuits/f-seq-closed}
        \quad
        =
        \quad    
        \tikzfig{circuits/productivity/productive}
    \]

\end{frame}

\begin{frame}
    \frametitle{Combinational equations}
    \setlength{\jot}{2em}
    \pause
    \begin{center}
        \[
            \tikzfig{circuits/axioms/gate-lhs}
            \quad=\quad
            \tikzfig{circuits/axioms/gate-rhs}  
            \pause
            \qquad
            \tikzfig{strings/cartesian/naturality-copy-lhs}
            \quad=\quad
            \tikzfig{strings/cartesian/naturality-copy-rhs}
        \]\[
            \pause
            \tikzfig{circuits/axioms/join-lhs}
            \quad=\quad
            \tikzfig{circuits/axioms/join-rhs}
            \pause
            \qquad
            \tikzfig{strings/cartesian/naturality-discard-lhs}
            \quad=\quad
            \tikzfig{strings/cartesian/naturality-discard-rhs}
            \pause
            \qquad
            \tikzfig{strings/structure/comonoid/unitality-r-lhs}
            \quad=\quad
            \tikzfig{strings/structure/comonoid/unitality-r-rhs}
        \]
    \end{center}
\end{frame}

\begin{frame}
    \frametitle{Sequential equations}

    \[
        \tikzfig{circuits/axioms/streaming-lhs-verbose}
        \quad=\quad
        \tikzfig{circuits/axioms/streaming-rhs}    
    \]
\end{frame}

\begin{frame}
    \frametitle{Instant feedback?}

    A circuit has \alert{delay-guarded feedback} if it is in the form \alert{up to axioms of STMCs}. 

    \[
        \tikzfig{circuits/productivity/delay-guarded}  
    \]

    \[
        \tikzfig{circuits/components/circuits/f-seq-traced}    
    \]
    


\end{frame}

\begin{frame}
    \frametitle{Unfolding delay-guarded feedback}

    \only<1>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-1}
        \end{center}
    }
    \only<2>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-2}
        \end{center}
    }
    \only<3>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-3}
        \end{center}
    }
    \only<4>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-4}
        \end{center}
    }
    \only<5>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-5}
        \end{center}
    }
    \only<6>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-6}
        \end{center}
    }
    \only<7>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-7}
        \end{center}
    }
    \only<8>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-8}
        \end{center}
    }
    \only<9>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-9}
        \end{center}
    }
    \only<10>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-10}
        \end{center}
    }
    \only<11>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-11}
        \end{center}
    }
    \only<12>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-12}
        \end{center}
    }
    \only<13>{
        \begin{center}
            \tikzfig{circuits/examples/reasoning/unfolding-dg/step-13}
        \end{center}
    }
\end{frame}